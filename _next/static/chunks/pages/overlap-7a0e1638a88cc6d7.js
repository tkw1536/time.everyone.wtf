(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{1698:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var s=n(7876),i=n(4232),r=n(7328),a=n.n(r),h=n(841),o=n.n(h);n(1479);var l=n(8847),d=n.n(l),p=n(8751);let c=d()(()=>n.e(101).then(n.bind(n,9101)),{loadableGenerated:{webpack:()=>[9101]},ssr:!1,loading:()=>(0,s.jsx)("select",{disabled:!0,children:(0,s.jsx)("option",{children:"Loading"})})});function u(e){return 60*e[0]+e[1]}function m(e){let t=e%60;return[(e-t)/60,t]}function x(e,t,n,s){return e<=n?t>=n?[{start:n,end:Math.min(t,s)}]:[]:s>=e?[{start:e,end:Math.min(t,s)}]:[]}class g extends i.Component{componentDidMount(){this.updateResult()}render(){let{timespan1:e,timespan2:t,result:n,resultIndex:i}=this.state;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.A,{title:"Overlap",children:[(0,s.jsx)("p",{children:"Use this page to compute the overlap of two timespans in different timezones."}),(0,s.jsx)("p",{children:"First select the timezones and timespans for both timezones in the two windows below. Then observe the result in the window below."})]}),(0,s.jsx)(p.A,{title:"Timespan 1",children:(0,s.jsx)(j,{state:e,onChange:this.onChangeSpan1,onReset:this.resetZone1})}),(0,s.jsx)(p.A,{title:"Timespan 2",children:(0,s.jsx)(j,{state:t,onChange:this.onChangeSpan2,onReset:this.resetZone2})}),(0,s.jsx)(p.A,{title:"Result",children:(0,s.jsx)(C,{activeIndex:i,onChange:this.handleResultTabChange,children:[{title:e.timezone,child:(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(z,{zone1:e.timezone,zone2:t.timezone,difference:n.difference,overlap:n.overlapInZone1}):""})},{title:t.timezone,child:(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(z,{zone1:t.timezone,zone2:e.timezone,difference:-n.difference,overlap:n.overlapInZone2}):""})}]})})]})}constructor(...e){super(...e),this.onChangeSpan1=e=>this.setState({timespan1:e},this.updateResult),this.onChangeSpan2=e=>this.setState({timespan2:e},this.updateResult),this.updateResult=()=>{let{timespan1:e,timespan2:t}=this.state,n=function(e,t){var n,s,i,r;let a=o().tz(e.timezone).utcOffset(),h=o().tz(t.timezone).utcOffset(),l=u(e.start),d=u(e.end),p=a-h,c=(u(t.start)+p+1440)%1440,g=(n=l,s=d,(i=c)<=(r=(u(t.end)+p+1440)%1440)?x(n,s,i,r):[...x(n,s,i,1439),...x(n,s,0,r)]),j=g.map(e=>{let{start:t,end:n}=e;return{start:(t-p+1440)%1440,end:(n-p+1440)%1440}}),f=g.map(e=>{let{start:t,end:n}=e;return{start:m(t),end:m(n)}});return{zone1Offset:a,zone2Offset:h,difference:p,overlapInZone1:f,overlapInZone2:j.map(e=>{let{start:t,end:n}=e;return{start:m(t),end:m(n)}})}}(e,t);this.setState({result:n})},this.resetZone1=()=>this.setState({timespan1:{timezone:this.props.initial,start:[0,0],end:[23,59]}}),this.resetZone2=()=>this.setState({timespan2:{timezone:this.props.initial,start:[0,0],end:[23,59]}}),this.handleResultTabChange=e=>{this.setState({resultIndex:e})},this.state={timespan1:{timezone:this.props.initial,start:[0,0],end:[23,59]},timespan2:{timezone:this.props.initial,start:[0,0],end:[23,59]},resultIndex:0}}}class j extends i.Component{render(){let{state:{timezone:e,start:t,end:n},onReset:i}=this.props;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"field-row",children:[(0,s.jsx)("label",{children:"Timezone"}),(0,s.jsx)(c,{current:e,onChange:this.handleTimezoneChange}),(0,s.jsx)("button",{onClick:i,children:"Reset"})]}),(0,s.jsxs)("div",{className:"field-row",children:[(0,s.jsx)(f,{hours:t[0],minutes:t[1],onChange:this.handleStartChange}),"\xa0 -",(0,s.jsx)(f,{hours:n[0],minutes:n[1],onChange:this.handleEndChange})]})]})}constructor(...e){super(...e),this.handleTimezoneChange=e=>{let{state:{start:t,end:n},onChange:s}=this.props;s({start:t,end:n,timezone:e})},this.handleStartChange=(e,t)=>{let{state:{end:n,timezone:s},onChange:i}=this.props,r=[n[0],n[1]];(e>r[0]||e==r[0]&&t>r[1])&&(r[0]=e,r[1]=t),i({end:r,start:[e,t],timezone:s})},this.handleEndChange=(e,t)=>{let{state:{start:n,timezone:s},onChange:i}=this.props,r=[n[0],n[1]];(e<r[0]||e==r[0]&&t<r[1])&&(r[0]=e,r[1]=t),i({start:r,end:[e,t],timezone:s})}}}class f extends i.Component{render(){let{hours:e,minutes:t}=this.props;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("select",{onChange:this.changeHours,value:e.toString(),children:this.hours.map(e=>(0,s.jsx)("option",{value:e.toString(),children:v(e,2)},e.toString()))}),"\xa0:",(0,s.jsx)("select",{onChange:this.changeMinutes,value:t.toString(),children:this.minutes.map(e=>(0,s.jsx)("option",{value:e.toString(),children:v(e,2)},e.toString()))})]})}constructor(...e){super(...e),this.changeMinutes=e=>{let{hours:t,onChange:n}=this.props;n&&n(t,parseInt(e.target.value,10))},this.changeHours=e=>{let{minutes:t,onChange:n}=this.props;n&&n(parseInt(e.target.value,10),t)},this.hours=Array.from(Array(24).keys()),this.minutes=Array.from(Array(60).keys())}}class C extends i.Component{render(){let{activeIndex:e,children:t,onChange:n}=this.props;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("menu",{role:"tablist",children:t.map((t,i)=>{let{title:r}=t;return(0,s.jsx)("button",{"aria-selected":e===i?"true":void 0,onClick:n.bind(this,i),children:r},i)})}),t.map((t,n)=>{let{child:i}=t;return(0,s.jsx)("article",{role:"tabpanel",hidden:e!==n,children:i},n)})]})}}class z extends i.Component{render(){let{zone1:e,zone2:t,difference:n,overlap:i}=this.props,r=Math.abs(n),a=i.length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("b",{children:e})," is ",r," minute",1!=r?"s":""," ",n>0?"ahead of":"behind"," ",(0,s.jsx)("b",{children:t}),"."]}),(0,s.jsxs)("p",{children:["There ",1==a?"is":"are"," ",(0,s.jsx)("b",{children:a})," overlap",1!=a?"s":""," between the provided timespans."]}),i.map((e,t)=>{let{start:n,end:i}=e;return(0,s.jsxs)("p",{children:[v(n[0],2),":",v(n[1],2)," - ",v(i[0],2),":",v(i[1],2)]},t)})]})}}function v(e,t){let n=e.toString();for(;n.length<t;)n="0"+e;return n}class b extends i.Component{componentDidMount(){this.setState({timezone:o().tz.guess()})}render(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:"Overlap"})}),(0,s.jsx)("main",{children:(0,s.jsx)(g,{initial:o().tz.guess()})})]})}constructor(...e){super(...e),this.state={}}}},4560:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/overlap",function(){return n(1698)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[871,716,629,636,593,792],()=>t(4560)),_N_E=e.O()}]);